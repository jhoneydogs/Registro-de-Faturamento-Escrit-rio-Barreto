<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Registro de Faturamento Escritório Barreto</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Faturamento Escritório Barreto - Mockup</title>
    <!-- Carrega Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter (padrão) e garante que o corpo ocupe toda a tela */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background-color: #f7f9fb; /* Um branco suave */
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <!-- Card Principal do Aplicativo -->
    <div class="w-full max-w_lg bg-white shadow-2xl rounded-xl p-6 md:p-8 transform transition-all duration-300">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-extrabold text-blue-700">
                Registro de Faturamento Escritório Barreto
            </h1>
            <p class="text-gray-500 mt-1">
                Insira o valor total do faturamento diário.
            </p>
        </header>

        <div id="appContainer">
            
            <!-- SEÇÃO DE INPUTS (Sem Form/Botão) -->
            <div id="inputSection" class="space-y-4 mb-8">
                <div>
                    <!-- Campo de Data (Revertido para Input Editável) -->
                    <label for="currentDate" class="block text-sm font-medium text-gray-700 mb-1">Data Atual</label>
                    <input type="date" id="currentDate" 
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out bg-gray-50"
                           value=""> <!-- O valor inicial será definido no JS -->
                </div>

                <!-- CAMPO ÚNICO DE FATURAMENTO -->
                <div class="mt-4">
                    <label for="revenueTotal" class="block text-sm font-medium text-gray-700 mb-1">
                        Faturamento Total do Dia
                    </label>
                    <!-- Contêiner que simula o input, com R$ estático -->
                    <div class="flex border-2 border-gray-300 rounded-xl focus-within:ring-blue-500 focus-within:border-blue-500 transition duration-150 ease-in-out items-center bg-white shadow-sm">
                        
                        <!-- Prefixo estático R$ para clareza -->
                        <span class="pl-4 py-4 text-2xl font-extrabold text-gray-500 select-none">R$</span>
                        
                        <!-- Ao digitar neste campo, a meta será atualizada em tempo real -->
                        <input type="tel" id="revenueTotal" required 
                               class="w-full py-4 pr-4 bg-transparent border-none outline-none 
                                      text-2xl font-extrabold text-blue-700 placeholder-gray-400 text-right"
                               placeholder="0,00" value="0,00">
                    </div>
                </div>
                <!-- FIM DO CAMPO ÚNICO -->
            </div>

            <!-- Indicador de Meta Diária -->
            <div class="bg-blue-50 p-4 rounded-lg shadow-inner">
                <h2 class="text-md font-bold text-blue-700 mb-1">Meta Diária (R$ 6.000,00)</h2>
                
                <!-- INFORMATIVO DA META -->
                <p class="text-xs text-gray-500 mb-3 font-semibold">
                    Lembrete: O ideal é tentar bater no mínimo R$ 2.000,00 em cada planilha de faturamento.
                </p>
                <!-- FIM DO INFORMATIVO -->
                
                <div class="w-full bg-gray-200 rounded-full h-3 mb-2 overflow-hidden">
                    <div id="metaProgressBar" class="bg-red-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-gray-600 font-medium">Total do Dia: <span id="dailyTotal">R$ 0,00</span></span>
                    <span id="metaStatus" class="font-bold text-red-500">Atingir meta!</span>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Lógica da Aplicação (Puramente Cliente-Side) -->
    <script type="module">
        // --- Variáveis Globais e Configurações ---
        const TARGET_GOAL = 6000.00; // Meta fixa diária de R$ 6.000,00

        // Elementos DOM (Apenas os necessários)
        const revenueTotalInput = document.getElementById('revenueTotal');
        const dailyTotalSpan = document.getElementById('dailyTotal');
        const metaProgressBar = document.getElementById('metaProgressBar');
        const metaStatusSpan = document.getElementById('metaStatus');
        const currentDateInput = document.getElementById('currentDate'); // Novo/Revertido

        // Define a data atual como padrão no campo de input
        currentDateInput.value = new Date().toISOString().substring(0, 10);

        // --- Funções de Utilitário ---

        /**
         * Converte uma string formatada em moeda (Ex: 3.000,00) para um número (3000.00).
         * @param {string} value - O valor formatado em string.
         * @returns {number} O valor numérico.
         */
        function parseCurrency(value) {
            if (!value) return 0;
            const cleanValue = value.replace(/\./g, '').replace(',', '.');
            return parseFloat(cleanValue) || 0;
        }

        /**
         * Formata um número para o formato de moeda brasileira (Ex: 3000.50 -> R$ 3.000,50).
         * @param {number} value - O valor numérico.
         * @returns {string} O valor formatado em string R$.
         */
        function formatCurrency(value) {
            // Garante que o número é tratado como moeda
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        /**
         * Aplica a máscara de moeda e ATUALIZA O INDICADOR DE META em tempo real.
         * @param {Event} event - O evento de input.
         */
        function handleInput(event) {
            let value = event.target.value;
            // 1. Remove tudo que não for dígito
            value = value.replace(/\D/g, ''); 
            
            if (value === '') {
                event.target.value = '0,00';
                updateGoalIndicator(0); // Atualiza meta para zero
                return;
            }

            // 2. Garante que o número tenha pelo menos 3 dígitos (para centavos)
            while (value.length < 3) {
                value = '0' + value;
            }

            // 3. Separa reais e centavos e remove zeros à esquerda
            const cents = value.slice(-2);
            let reais = value.slice(0, -2);
            reais = reais.replace(/^0+/, '');
            if (reais === '') {
                reais = '0';
            }

            // 4. Adiciona separador de milhares
            reais = reais.replace(/\B(?=(\d{3})+(?!\d))/g, ".");

            event.target.value = `${reais},${cents}`;
            
            // 5. Atualiza a meta em tempo real
            const currentTotal = parseCurrency(event.target.value);
            updateGoalIndicator(currentTotal);
        }

        // Aplica a formatação em tempo real e atualiza o indicador
        revenueTotalInput.addEventListener('input', handleInput);

        // --- Funções de Lógica Principal ---

        /**
         * Atualiza o indicador visual da meta.
         * @param {number} total - O total de faturamento para o dia atual.
         */
        function updateGoalIndicator(total) {
            const percentage = Math.min(100, (total / TARGET_GOAL) * 100);
            
            dailyTotalSpan.textContent = formatCurrency(total);
            metaProgressBar.style.width = `${percentage}%`;

            if (total >= TARGET_GOAL) {
                metaProgressBar.classList.remove('bg-yellow-500', 'bg-red-500');
                metaProgressBar.classList.add('bg-green-500');
                metaStatusSpan.textContent = 'Meta Atingida!';
                metaStatusSpan.classList.remove('text-red-500', 'text-yellow-500');
                metaStatusSpan.classList.add('text-green-600');
            } else if (total > (TARGET_GOAL * 0.5)) {
                metaProgressBar.classList.remove('bg-red-500', 'bg-green-500');
                metaProgressBar.classList.add('bg-yellow-500');
                metaStatusSpan.textContent = 'Quase lá!';
                metaStatusSpan.classList.remove('text-red-500', 'text-green-600');
                metaStatusSpan.classList.add('text-yellow-600');
            } else {
                // A barra começa vermelha (padrão)
                metaProgressBar.classList.remove('bg-yellow-500', 'bg-green-500');
                metaProgressBar.classList.add('bg-red-500');
                metaStatusSpan.textContent = 'Atingir meta!';
                metaStatusSpan.classList.remove('text-yellow-600', 'text-green-600');
                metaStatusSpan.classList.add('text-red-500');
            }
        }

        // --- Inicialização ---

        // Garante que o indicador de meta comece com 0,00 e o status correto.
        updateGoalIndicator(0);

    </script>
</body>
</html>
    
  </body>
  
</html>
